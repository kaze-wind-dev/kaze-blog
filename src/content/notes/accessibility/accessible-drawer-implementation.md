---
title: アクセシブルなドロワーの実装方法
description: この記事ではアクセシブルなドロワーの実装方法についてデモコードを交えながら考察を行っていきます。
publishedAt: 2026/02/20
category: accessibility
draft: false
---

## 実装パターンの紹介

この記事では2つの実装パターンについて紹介をします。

1. **dialogタグを使用** - モダンブラウザ向け（推奨）
2. **divとARIA属性を使用** - レガシーブラウザ対応

完全なコードとデモは[ドロワーの実装](https://kaze-develop.com/patterns/drawer)にて掲載しています。

##　　どちらを使えば良いのか

先に結論になりますが、`dialog`を使用する方法が推奨されるかと思います。
理由は`dialog`要素の仕様そのものにあります。

**dialogタグ（推奨）:**

- モダンブラウザのみサポートでOK
- 実装がシンプル
- アクセシビリティ機能が充実

**divとARIA属性:**

- IE11などのサポートが必要
- フォーカス管理の実装が必須
- より細かい制御はしやすい

### そもそもdialogタグとは

dialogはモーダルや非モーダルダイアログボックス、アラート、サブウィンドウなどで使用できる要素です。
サブウィンドウとはウィンドウの中に重ねて表示される、補助的なウィンドウやパネルを表します。
そのため、ドロワーはサブウィンドウに該当すると解釈することができます。
注意点として、タグ単体では開閉動作まで提供していないので、JavaScriptによって制御をする必要があります。

### dialogタグの特徴

開閉のためのメソッドが用意されており、とても便利です。
また、デフォルトでフォーカストラップがかかったり、`Escape`キーで閉じることができたり、`::backdrop`によってスタイルの制御もしやすいです。

スクリーンリーダーで読み上げた際には、「ダイアログ」と言う単語を含めて読み上げられます。（VoiceOver使用時）

- デフォルトでフォーカストラップがかかる
- `Escape`キーによる閉じる機能が備わっている
- divを使うよりもセマンティックになる
- 非表示時にデフォルトでアクセシビリティツリーから除外される
- 開閉のために専用のAPIが用意されている
- スクリーンリーダー（VoiceOver使用時）に「ダイアログ」と読み上げられる

###　dialogの対応ブラウザ

全てのモダンブラウザで対応できます。
https://caniuse.com/?search=dialog

ただし、バージョンによっては使えないところもあるので、使用するか否かは「ブラウザバージョンをどこまで対応するか」で決めても問題ないかと思います。

## 実装パターン1: dialogタグ

### ポイント

#### 1. aria-expandedとaria-controlsを使用する

```typescript
aria-expanded="false"  // メニューの開閉状態
aria-controls="menu"   // 対象の要素ID
```

この2つは**必ずセット**で使用します。
どちらもコントロール先のトリガーとなる要素に指定します。
`aria-expanded`はコントロール先の開閉状態を表し、`aria-controls`はコントロール対象の要素をID名で指定します。
こちらをつけ忘れると、操作しているのがどの要素なのかが不明になってしまいます。

#### 2. dialog要素の開閉メソッド

```typescript
menu.showModal(); // モーダルとして開く（::backdropが使える）
menu.show(); // 非モーダルとして開く
menu.close(); // 閉じる
```

これらは`dialog`要素で使用できるメソッドです。
`::backdrop`要素を使用する場合は、`showModal()`、使用しない場合は`show()`を使います。
アニメーションをつける場合は、クラスの付与を合わせて行うと良いかと思います。

#### 3. アニメーション対応

```typescript
const closeMenu = (): void => {
  removeOpenClass(menu);
  // transitionの完了を待つ
  menu.addEventListener(
    "transitionend",
    () => {
      menu.close();
    },
    { once: true },
  );
};
```

閉じる時には、イベントリスナーの`transitionend`を使用します。
このようにしないと、`transition`の完了を待たずに閉じてしまうため、うまくアニメーションしません。
また、`{ once: true }`を設定し忘れると、`transition`中に何度もコールバック関数がよばれてしまい、意図しない挙動になるので、注意が必要です。

#### 4. Escapeキー対応

```typescript
menu.addEventListener("close", () => {
  if (isMenuOpen()) {
    removeOpenClass(menu);
    removeOpenClass(body);
  }
});
```

クラスを付与した場合、`Escape`キーで閉じた時に`.-open`クラスが残ってしまいます。
回避するためには、`Escape`キーが押された時にクラスを取り除く処理を忘れずに行ってください。

### コード例

以下からご覧ください
[コード全文]
完全な実装コードは[ドロワーの実装ページ](リンク)をご覧ください。

## 実装パターン2: divとARIA属性

`dialog`タグが持っている機能を手動で実装する必要があります。

### 実装が必要な機能

- フォーカストラップ
- Escapeキーで閉じる
- aria-hidden の切り替え
- フォーカス管理

### コード例

以下からご覧ください。  
完全な実装コードは[ドロワーの実装ページ](リンク)をご覧ください。

## 参考

https://developer.mozilla.org/ja/docs/Web/HTML/Reference/Elements/dialog  
https://gizumo-inc.jp/media/a11y-drawer/
https://design.digital.go.jp/dads/components/drawer/

## 最後に

いかがでしたでしょうか。
結論としては、以下のことが言えるのではないかと思います。

- **モダンブラウザのみ**: dialogタグを使用する
- **レガシー対応必要**: divとARIA属性を使用する
- どちらもアクセシビリティに配慮した実装が可能

実際にコードを書いてみて、思ったよりも考えることや書くコードの量が多いように感じました。
今後も誰もが使いやすいアクセシブルなWeb制作を目指して頑張りたいと思います。
