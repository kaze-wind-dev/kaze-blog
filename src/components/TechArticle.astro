---
import type { ZennArticle } from "@/types/zenn";
import Date from "./Date.astro";
type Props = {
  tech: ZennArticle;
};
const { tech } = Astro.props;
const type = tech.article_type === "tech" ? "技術記事" : "アイデア記事";
const techPath = `https://zenn.dev${tech.path}`;
---

<div class="tech-article">
  <a
    class="tech-article__link"
    href={techPath}
    target="_blank"
    rel="noopener noreferrer"
  >
    <p class="tech-article__title">
      {tech.title}<svg
        class="oin-icon"
        xmlns="http://www.w3.org/2000/svg"
        height="1em"
        viewBox="0 -960 960 960"
        width="1em"
        fill="var(--text-primary)"
        ><path
          d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"
        ></path></svg
      >
    </p>
    <div class="tech-article__meta">
      <Date date={tech.published_at} />
      <p class="tech-article__type category">{type}</p>
      <svg
      class="zenn-icon"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        x="0px"
        y="0px"
        viewBox="0 0 88.3 88.3"
        style="enable-background:new 0 0 88.3 88.3;"
        xml:space="preserve"
        aria-label="こちらの記事はZennによって投稿されています"
      >
        <g fill="#3EA8FF" aria-hidden="true">
          <path
            class="st0"
            d="M3.9,83.3h17c0.9,0,1.7-0.5,2.2-1.2L69.9,5.2c0.6-1-0.1-2.2-1.3-2.2H52.5c-0.8,0-1.5,0.4-1.9,1.1L3.1,81.9
		C2.8,82.5,3.2,83.3,3.9,83.3z"
          ></path>
          <path
            class="st0"
            d="M62.5,82.1l22.1-35.5c0.7-1.1-0.1-2.5-1.4-2.5h-16c-0.6,0-1.2,0.3-1.5,0.8L43,81.2c-0.6,0.9,0.1,2.1,1.2,2.1
		h16.3C61.3,83.3,62.1,82.9,62.5,82.1z"
          ></path>
        </g>
      </svg>
    </div>
  </a>
</div>

<style lang="scss">
  @use "../styles/mixin" as *;
  @use "../styles/functions" as *;
  @use "../styles/extends" as *;

  .tech-article {
    display: grid;
    min-width: 0;
    &__link {
      display: flex;
      flex-direction: column;
      padding: var(--spacing-lg);
      background-color: var(--white-color);
      border-radius: rem(8);
      transition: box-shadow 0.3s;
      box-shadow: 0 0 rem(12) rgb(0 0 0 /0.1);
      width: 100%;
      min-width: 0;

      &:hover {
        box-shadow: 0 0 rem(8) rgb(0 0 0 /0.2);
        .tech-article__title {
          @extend %line-hover;
          .oin-icon {
            fill: var(--text-primary);
          }
        }
      }
    }
    &__meta {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: var(--spacing-sm);
      order: -1;
      margin-block-end: var(--spacing-sm);
      .zenn-icon {
        width: 1.5em;
      }
    }
    &__title {
      font-weight: 700;
      font-size: var(--font-size-md);
      width: fit-content;
      max-width: 100%;
      padding-inline-end: 1.25em;
      padding-block-end: 0.25em;
      position: relative;
      z-index: 1;
      @include lineClamp(1);
      @extend %line;
      .oin-icon {
        position: absolute;
        top: 50%;
        right: 0;
        transform: translate(0, -50%);
        transition: fill 0.3s;
      }
    }
  }
</style>
